{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["export class FilterBuilder {\n         constructor(data) {\n           this.data = data;\n           this.query = \"\";\n           this.orWhere = this.orWhere.bind(this);\n           this.where = this.where.bind(this);\n           this.get = this.get.bind(this);\n         }\n\n         where(...query) {\n           this.makeAnd()\n           if (typeof query[0] === \"function\") {\n             this.query += \"(\";\n             query[0](this);\n             this.query += \")\";\n           } else {\n             if (query.length === 1) {\n               this.query += `(item.${query[0]})`;\n             } else if (query.length === 2) {\n               this.query += `(item.${query[0]} == '${query[1]}')`;\n             } else if (query.length === 3) {\n               this.query += `(item.${query[0]} ${query[1]} '${query[2]}')`;\n             }\n           }\n           return this;\n         }\n\n         orWhere(...query) {\n           this.query += \" || \";\n           return this.where(...query);\n         }\n\n         whereIncludes(list, key, value = null) {\n           this.makeAnd()\n           if (value == null) {\n             this.query += `(item.${list} ? item.${list}.includes('${key}') : false)`;\n             return this;\n           }\n           this.query += `(item.${list} ? item.${list}.some(element => element.${key} === '${value}') : false)`;\n           return this;\n         }\n\n         orWhereIncludes(list, key, value = null) {\n           this.query += \" || \";\n           this.whereIncludes(list, key, value);\n           return this;\n         }\n\n         whereIn(key, list) {\n           this.makeAnd()\n           this.query += `(item.${key} ? ['${list.join(\"', '\")}'].includes(item.${key}) : false)`;\n           return this;\n         }\n\n         orWhereIn(key, list) {\n           this.query += \" || \";\n           this.whereIn(key, list);\n           return this;\n         }\n\n         makeAnd(){\n           if (this.query.slice(-1).includes(\")\")) {\n             this.query += \" && \";\n           }\n         }\n\n         stripEmpties() {\n           this.query = this.query.replace(/&& \\(\\)/g, \"\");\n           this.query = this.query.replace(/\\(\\)  &&/g, \"\");\n           this.query = this.query.replace(/\\(\\) &&/g, \"\");\n         }\n\n         get() {\n           this.stripEmpties();\n           return this.data.filter(item => {\n             return new Function(\"item\", `\"use strict\";return ${this.query};`)(\n               item\n             );\n           });\n         }\n       }"],"names":["FilterBuilder","constructor","data","query","orWhere","this","bind","where","get","makeAnd","length","whereIncludes","list","key","value","orWhereIncludes","whereIn","join","orWhereIn","slice","includes","stripEmpties","replace","filter","item","Function"],"mappings":"IAAaA,EACJC,SAAYC,QACLA,KAAOA,OACPC,MAAQ,QACRC,QAAUC,KAAKD,QAAQE,KAAKD,WAC5BE,MAAQF,KAAKE,MAAMD,KAAKD,WACxBG,IAAMH,KAAKG,IAAIF,KAAKD,mBAG3BE,oFACOE,UACmB,mBAAbN,EAAM,SACVA,OAAS,IACdA,EAAM,GAAGE,WACJF,OAAS,KAEO,IAAjBA,EAAMO,YACHP,OAAU,SAAQA,EAAM,OACH,IAAjBA,EAAMO,YACVP,OAAU,SAAQA,EAAM,WAAUA,EAAM,QACnB,IAAjBA,EAAMO,cACVP,OAAU,SAAQA,EAAM,OAAMA,EAAM,QAAOA,EAAM,SAGnDE,kBAGTD,wFACOD,OAAS,UACPE,MAAKE,cAASJ,gBAGvBQ,uBAAcC,EAAMC,EAAKC,yBAAQ,WAC1BL,UACQ,MAATK,QACGX,OAAU,SAAQS,aAAeA,gBAAkBC,gBACjDR,YAEJF,OAAU,SAAQS,aAAeA,8BAAgCC,WAAYC,gBAC3ET,mBAGTU,yBAAgBH,EAAMC,EAAKC,yBAAQ,WAC5BX,OAAS,YACTQ,cAAcC,EAAMC,EAAKC,GACvBT,kBAGTW,iBAAQH,EAAKD,eACNH,eACAN,OAAU,SAAQU,UAAWD,EAAKK,KAAK,4BAA2BJ,eAChER,kBAGTa,mBAAUL,EAAKD,eACRT,OAAS,YACTa,QAAQH,EAAKD,GACXP,kBAGTI,mBACMJ,KAAKF,MAAMgB,OAAO,GAAGC,SAAS,YAC3BjB,OAAS,qBAIlBkB,6BACOlB,MAAQE,KAAKF,MAAMmB,QAAQ,WAAY,SACvCnB,MAAQE,KAAKF,MAAMmB,QAAQ,UAAa,SACxCnB,MAAQE,KAAKF,MAAMmB,QAAQ,WAAY,iBAG9Cd,sCACOa,eACEhB,KAAKH,KAAKqB,gBAAOC,UACf,IAAIC,SAAS,8BAA+BpB,YAA5C,CACLmB"}